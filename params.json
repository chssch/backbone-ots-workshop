{"tagline":"A backbone workshop","body":"### Welcome to the Introduction for Backbone, we're glad to have you.\r\n\r\nWe will build a single page app with backbone.js using a REST API. By using the backbone.js concepts of models, collections, views/sub-views, templating and routing you will learn a modern approach of designing javascript applications for the browser.\r\n\r\nWe will develop a simple bookmarking service. You can save a bookmarks (a bookmark has an descriptive name and a URL) in different folders.\r\n\r\nWe only want to develop the frontend for this. Therefore we already prepared the backend. Just install, if not done already, this ruby based API on you local machine:\r\n\r\nhttps://github.com/endor/otscamp-backbone-backend\r\n\r\nLet us know, if you need help with the installation.\r\n\r\n\r\n\r\n## Let's start\r\n\r\n### REST recap\r\n>REST stands for Representational State Transfer. (It is sometimes spelled \"ReST\".) It relies on a stateless, client-server, cacheable communications protocol -- and in virtually all cases, the HTTP protocol is used.\r\n>\r\n>RESTful applications use HTTP requests to post data (create and/or update), read data (e.g., make queries), and delete data. Thus, REST uses HTTP for all four CRUD (Create/Read/Update/Delete) operations.\r\n>http://rest.elkstein.org/\r\n\r\n### Models\r\n\r\n>Models are the heart of any JavaScript application, containing the interactive data as well as a large part of the logic surrounding it: conversions, validations, computed properties, and access control. You extend Backbone.Model with your domain-specific methods, and Model provides a basic set of functionality for managing changes.\r\n\r\n```javascript\r\n/*\r\n* The bookmark model represents one bookmark\r\n*\r\n*/\r\nwindow.Bookmark = Backbone.Model.extend({\r\n\t\r\n    urlRoot: config.BASEURL + \"/bookmarks\",\r\n\r\n    initialize: function() {\r\n        console.log(\"Bookmark initialized\");\r\n    }\r\n\r\n});\r\n```\r\n\r\nTo start put this code into the model section in your public/index.html of your ruby project.\r\n\r\nOpen now the Web Inspector/Console of your Chrome browser.\r\n\r\n>new Model([attributes])\r\n>\r\n>When creating an instance of a model, you can pass in the initial values of theattributes, which will be set on the model. If you define an initialize function, it will be invoked when the model is created.\r\n\r\nType:\r\n\r\n    var bookmark = new Bookmark({url:”http://www.opentechschool.org/”, name: “OpenTechSchool”});\r\n\r\nWe created a new Bookmark object.\r\n\r\nTo inspect the object just type into the console:\r\n\r\n    bookmark\r\n\r\nNow you can find in `attributes` of the object the data.\r\n\r\nLet's do some operations on the data.\r\n\r\n```\r\nbookmark.get(‘name’);\r\nbookmark.set(‘name’, ‘OTS’);\r\nbookmark.get(‘name’);\r\n```\r\nFirst we get the attribute name. with `set` you can edit an attribute.\r\nWe should always to use this functions to change data.\r\n\r\n```\r\nbookmark.toJSON();\r\n```\r\nreturns a JSON representation of all attributes.\r\n\r\nNow we will sync our locally created data to the server. Watch the requests in the \"Network\" tab of your Chrome Web Inspector.\r\n\r\n```\r\nbookmark.save();\r\n```\r\n\r\nIn the \"Header\" tab you can see, that Backbone automatically wraps the data into a JSON formatted string and sends a POST request to the `/bookmark` endpoint of our API. In the \"Response\" the API returns a JSON string of the object that now has an `id`.\r\n\r\nType\r\n\r\n```\r\nbookmark.id\r\n```\r\n\r\nThe bookmark is now synchronized with the server.\r\nIf you open a new tab an type\r\n\r\nhttp://localhost:3000/bookmarks\r\n\r\nYou get a list of all bookmarks stored by the backend.\r\n\r\nIf we change our model data and execute a `save()` again, we can see that Backbone is now using a PUT request to update the data on the server.\r\n\r\n## 2. Simple Views\r\n\r\n>Backbone views are almost more convention than they are code — they don't determine anything about your HTML or CSS for you, and can be used with any JavaScript templating library. The general idea is to organize your interface into logical views, backed by models, each of which can be updated independently when the model changes, without having to redraw the page. Instead of digging into a JSON object, looking up an element in the DOM, and updating the HTML by hand, you can bind your view's render function to the model's \"change\" event — and now everywhere that model data is displayed in the UI, it is always immediately up to date.\r\n\r\nWe want to create a simple view, add this code to your file.\r\n\r\n```javascript\r\nwindow.BookmarkView = Backbone.View.extend({\r\n    \r\n    initialize: function() {\r\n        console.log(\"BookmarkView initialized\");\r\n        console.log(\"Model:\", this.model);\r\n\r\n        // The $el element is automatically a cached jQuery element \r\n        // to your DOM element that you passed on view creation\r\n        console.log(\"DOM Element:\", this.$el);\r\n    },\r\n \r\n    render: function() {\r\n        this.$el.html('<b>' + this.model.get('name') + ':</b> ' \r\n                            + this.model.get('url'));\r\n        // We always return the view itself after rendering\r\n        return this;\r\n    }\r\n});\r\n```\r\n\r\nWe pass the model, that should be presented by the view, and the DOM Element as options. These options are directly attached to the view:\r\n\r\n```\r\nvar bookmarkView = new BookmarkView({model: bookmark, el: \"#oneBookmark\"});\r\n```\r\n\r\nNow we can execute the `render` function:\r\n\r\n```\r\nbookmarkView.render();\r\n```\r\n\r\nThe View gets now rendered into the DOM element with the id `oneBookmark`.\r\n\r\n#### Using Templates\r\n\r\nIn the View above we're mixing presentation code with logic code. To seperate these, we use templates.\r\nUnderscore.js, a library that is used by Backbone.js comes with its own template system. We want to use that to decouple the presentational from the functional part. For more informations see also: http://underscorejs.org/#template\r\n\r\nWe're using the `<script>` tag to manage our templates. We ass above out JavaScript code in the file:\r\n\r\n```\r\n<script id=\"templateBookmark\" type=\"text/html\">\r\n\t<li class=\"bookmarkEntry\">\r\n\t\t<b><%= name %></b> <a href=\"<%= url %>\"><%= url %></a>\r\n\t</li>\t\r\n</script>\r\n``` \r\n\r\nWe can use the template with changing out view into:\r\n\r\n```\r\nwindow.BookmarkView = Backbone.View.extend({\r\n\t\r\n    // Load content of #templateBookmark and prepare template\r\n    // The underscore.js _.template funtion takes a string and \r\n    // returns a compiled template function\r\n    compiledTemplate: _.template($('#templateBookmark').html()),\r\n\r\n    // Constructor function of BookmarkView\r\n    initialize: function() {\r\n        console.log(\"BookmarkView initialized\");\r\n        this.model.on('change', this.render, this);\r\n    },\r\n\r\n    render: function() {\r\n    \t// Render template with model data\r\n    \tvar rendered = this.compiledTemplate( this.model.toJSON() ); \r\n    \t\r\n    \t// Set as inner html of view element\r\n    \tthis.$el.html(rendered);\r\n\r\n    \treturn this;\r\n    }\r\n});\r\n```\r\n\r\nReload your file and create a `Bookmark`. Pass the bookmark object and a DOM element to a created `BookmarkView` an render.\r\n\r\n#### Events\r\n\r\nIn the view initialization we registered on event:\r\nthis.model.on('change', this.render, this);\r\n\r\nBackbone fires different built-in events on particular actions (http://backbonejs.org/#FAQ-events). \r\n\r\nThis is what happens here: On a change of the model attached to the view, execute the `render` function of the view. We also have to pass a context `this`, so that we can use the current view in the `render` function.\r\n\r\nWe can test this function by changing the model data in the console:\r\n\r\n`bookmark.set(‘name’, ‘OTS’);`\r\n\r\nYou'll see that the content is updated in the page.\r\n\r\n### Collections\r\n\r\n>Collections are ordered sets of models. You can bind \"change\" events to be notified when any model in the collection has been modified, listen for \"add\" and \"remove\" events, fetch the collection from the server.\r\n\r\nWe are going to implement a collection of bookmarks:\r\n\r\n```\r\n\r\n```\r\n\r\n\r\n\r\n\r\n### Authors and Contributors\r\nFrank ...\r\nChristoph Schwienheer, @chssch","name":"Backbone-ots-workshop","note":"Don't delete this file! It's used internally to help with page regeneration.","google":""}